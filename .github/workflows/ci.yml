name: CI - Build and Test

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build-and-test:
    name: Build Debug APK and Run E2E Tests
    permissions:
      contents: write  # Required to checkout code and push screenshot updates
      pull-requests: write  # Required to create PRs for screenshot updates
    uses: ./.github/workflows/e2e-test.yml
    with:
      artifact-name-prefix: 'ci-e2e'
